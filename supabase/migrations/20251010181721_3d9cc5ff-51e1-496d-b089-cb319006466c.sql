-- Adicionar campos faltantes na tabela defensas baseado na planilha Excel
ALTER TABLE public.defensas
ADD COLUMN IF NOT EXISTS br TEXT,
ADD COLUMN IF NOT EXISTS snv TEXT,
ADD COLUMN IF NOT EXISTS tramo TEXT,
ADD COLUMN IF NOT EXISTS quantidade_laminas INTEGER,
ADD COLUMN IF NOT EXISTS comprimento_total_tramo_m NUMERIC,
ADD COLUMN IF NOT EXISTS funcao TEXT,
ADD COLUMN IF NOT EXISTS especificacao_obstaculo_fixo TEXT,
ADD COLUMN IF NOT EXISTS id_defensa TEXT,
ADD COLUMN IF NOT EXISTS distancia_pista_obstaculo_m NUMERIC,
ADD COLUMN IF NOT EXISTS risco TEXT,
ADD COLUMN IF NOT EXISTS velocidade_kmh INTEGER,
ADD COLUMN IF NOT EXISTS vmd_veic_dia INTEGER,
ADD COLUMN IF NOT EXISTS percentual_veiculos_pesados NUMERIC,
ADD COLUMN IF NOT EXISTS geometria TEXT,
ADD COLUMN IF NOT EXISTS classificacao_nivel_contencao TEXT,
ADD COLUMN IF NOT EXISTS nivel_contencao_en1317 TEXT,
ADD COLUMN IF NOT EXISTS nivel_contencao_nchrp350 TEXT,
ADD COLUMN IF NOT EXISTS espaco_trabalho TEXT,
ADD COLUMN IF NOT EXISTS terminal_entrada TEXT,
ADD COLUMN IF NOT EXISTS terminal_saida TEXT,
ADD COLUMN IF NOT EXISTS adequacao_funcionalidade_lamina TEXT,
ADD COLUMN IF NOT EXISTS adequacao_funcionalidade_laminas_inadequadas TEXT,
ADD COLUMN IF NOT EXISTS adequacao_funcionalidade_terminais TEXT,
ADD COLUMN IF NOT EXISTS adequacao_funcionalidade_terminais_inadequados TEXT,
ADD COLUMN IF NOT EXISTS distancia_face_defensa_obstaculo_m NUMERIC,
ADD COLUMN IF NOT EXISTS distancia_bordo_pista_face_defensa_m NUMERIC,
ADD COLUMN IF NOT EXISTS link_fotografia TEXT,
ADD COLUMN IF NOT EXISTS foto_url TEXT;